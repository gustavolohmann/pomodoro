<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flashcards - Hub de Estudo</title>
    <link rel="stylesheet" href="../css/style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body class="method-page has-top-bar">
    <div class="background-gradient"></div>
    <header class="top-bar">
        <nav class="breadcrumb" aria-label="Breadcrumb">
            <a href="index.html" data-i18n="hub">Hub</a>
            <span class="breadcrumb-separator">‚Ä∫</span>
            <span class="breadcrumb-current" data-i18n="flashcards">Flashcards</span>
        </nav>
        <span id="langSelector"></span>
    </header>
    <div class="container">
        <a href="index.html" class="back-link" data-i18n="backToHub">‚Üê Voltar ao Hub</a>
        <div class="glass-card">
            <header class="header">
                <h1 class="app-title">üÉè <span data-i18n="flashcards">Flashcards</span></h1>
            </header>
            <p class="hub-intro" data-i18n="flashcardsDesc">Memoriza√ß√£o ativa de conceitos. Crie cards com pergunta e resposta, depois revise.</p>

            <div class="setting-group" style="margin-bottom: 20px;">
                <label data-i18n="question">Nova pergunta</label>
                <input type="text" id="newQuestion" data-i18n-placeholder="newQuestionPlaceholder" placeholder="Pergunta" class="task-text" style="margin-bottom: 8px;">
                <input type="text" id="newAnswer" data-i18n-placeholder="newAnswerPlaceholder" placeholder="Resposta" class="task-text">
            </div>
            <button type="button" class="btn btn-primary" id="addCardBtn" data-i18n="saveCard">Salvar card</button>

            <h2 class="hub-section-title" style="margin-top: 24px;" data-i18n="yourCards">Seus cards</h2>
            <div id="cardsList"></div>
        </div>
    </div>
    <script src="../lang/pt-BR.js"></script>
    <script src="../lang/en.js"></script>
    <script src="../lang/es.js"></script>
    <script src="../js/common.js"></script>
    <script src="../js/hub-data.js"></script>
    <script>
        function loadCards() {
            const cards = HubData.getFlashcards();
            const el = document.getElementById('cardsList');
            if (cards.length === 0) {
                el.innerHTML = '<p style="color: var(--text-secondary);">' + (window.I18n ? window.I18n.t('noCards') : 'Nenhum card ainda. Crie o primeiro acima.') + '</p>';
                return;
            }
            el.innerHTML = cards.map(c => `
                <div class="task-list" style="margin-bottom: 12px;">
                    <div style="padding: 12px 16px; background: var(--secondary-color); border-radius: 12px; border: 1px solid var(--glass-border);">
                        <div style="font-weight: 600; margin-bottom: 8px;">${escapeHtml(c.question)}</div>
                        <div style="color: var(--text-secondary); font-size: 14px;">${escapeHtml(c.answer)}</div>
                        <button type="button" class="btn btn-secondary" style="margin-top: 8px; padding: 6px 12px; font-size: 12px;" data-id="${c.id}">${window.I18n ? window.I18n.t('delete') : 'Excluir'}</button>
                    </div>
                </div>
            `).join('');
            el.querySelectorAll('[data-id]').forEach(btn => {
                btn.onclick = function() {
                    const id = this.dataset.id;
                    const cards = HubData.getFlashcards().filter(c => c.id !== id);
                    HubData.setFlashcards(cards);
                    loadCards();
                };
            });
        }

        function escapeHtml(s) {
            const div = document.createElement('div');
            div.textContent = s || '';
            return div.innerHTML;
        }

        document.getElementById('addCardBtn').addEventListener('click', function() {
            const q = document.getElementById('newQuestion').value.trim();
            const a = document.getElementById('newAnswer').value.trim();
            if (!q || !a) { alert(window.I18n ? window.I18n.t('fillQuestionAnswer') : 'Preencha pergunta e resposta.'); return; }
            const cards = HubData.getFlashcards();
            cards.push({ id: 'c_' + Date.now(), question: q, answer: a, nextReview: HubData.getToday(), intervalIndex: 0 });
            HubData.setFlashcards(cards);
            document.getElementById('newQuestion').value = '';
            document.getElementById('newAnswer').value = '';
            loadCards();
        });

        loadCards();
    </script>
</body>
</html>
